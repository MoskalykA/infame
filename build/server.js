var k={language:{type:1}};var g={youAlreadyHaveCharacter:"You already have a character",yourCharacterCreatedWithSuccess:"Your character was created with success",characterLimit:"The character limit is $$, you cannot have a new character",newCharacter:"$$ has just created a character ($$$)",playerCharacter:"$$ has just chosen a character ($$$)",selectedCharacter:"You have successfully selected a character",invalidCharacter:"This character does not exist",reselectCharacter:"You will have to choose your character again",charactersSaved:"All the characters were saved",newPlayer:"$$ has just joined",playerDisconnected:"$$ has just disconnected",noOpenSession:"You do not have an open $$ so you are not able to join the server.",impossibleAction:"It is impossible to do this",infameGameModeReloaded:"The infame game mode was reloaded",unbannedBeCareful:"You have been unbanned, please be careful.",banDetails:"You were banned for $$ by $$$ and you will be unbanned on $$$$",hospitalNotification:"You have been transported to the hospital"};var M={youAlreadyHaveCharacter:"Vous avez d\xE9j\xE0 un personnage",yourCharacterCreatedWithSuccess:"Votre personnage a \xE9t\xE9 cr\xE9\xE9 avec succ\xE8s",characterLimit:"La limite de personnages est de $$, vous ne pouvez pas en cr\xE9er un nouveau",newCharacter:"$$ vient de cr\xE9er un personnage ($$$)",playerCharacter:"$$ vient de choisir un personnage ($$$)",selectedCharacter:"Vous avez s\xE9lectionn\xE9 un personnage avec succ\xE8s",invalidCharacter:"Ce personnage n'existe pas",reselectCharacter:"Vous devrez choisir votre personnage \xE0 nouveau",charactersSaved:"Tous les personnages ont \xE9t\xE9 sauvegard\xE9s",newPlayer:"$$ vient de rejoindre",playerDisconnected:"$$ vient de se d\xE9connecter",noOpenSession:"Vous n'avez pas de session $$ ouverte, vous ne pouvez pas rejoindre le serveur.",impossibleAction:"Il est impossible de faire cela",infameGameModeReloaded:"Le mode de jeu inf\xE2me a \xE9t\xE9 recharg\xE9",unbannedBeCareful:"Vous avez \xE9t\xE9 d\xE9banni, veuillez faire attention.",banDetails:"Vous avez \xE9t\xE9 banni pour $$ par $$$, et vous serez d\xE9banni le $$$$",hospitalNotification:"Vous avez \xE9t\xE9 transport\xE9 \xE0 l'h\xF4pital"};var l=(r,e=[])=>{let t="$$",n=(k.language.type===0?g:M)[r];return e.map(a=>{n=n.replace(t,a),t=t+"$"}),n};var s={language:{type:1},identifier:{name:"discord"},character:{enabled:!0,maxCharactersEnabled:!1,maxCharacters:3,save:{position:!0,health:!0,armor:!0}},health:{default:200},armor:{default:0},model:{default:2488675799},weapons:{default:[1593441988,1649403952]},rank:{default:"user"},log:{enabled:!0,saveInDatabase:!0},ban:{enabled:!0},death:{timeForRespawn:1e4},saveTime:6e4};var I=(r,...e)=>new Promise(t=>{emitNet(r,e),setTimeout(()=>{t()},500)});var v=r=>{setTimeout(()=>{I("infame.nets.playerRespawned",r)},s.death.timeForRespawn)};var h=(r,e,t,n)=>{emitNet("infame.nets.notifications.notification",r,e,t,n)};on("onResourceStop",r=>{GetCurrentResourceName()==r&&(GlobalState.infameAfterTheStop=!0)});on("onResourceStart",r=>{GetCurrentResourceName()==r&&setTimeout(()=>{GlobalState.infameAfterTheStop&&getPlayers().map(e=>{let t=Player(e);t.state.infameId=void 0,h(Number(e),0,l("infameGameModeReloaded"),5e3),s.character.enabled&&(t.state.characterId=void 0,h(Number(e),0,l("reselectCharacter"),5e3))})},1e3)});var ee=require("mongodb"),le="mongodb://127.0.0.1:27017",d=new ee.MongoClient(le);on("playerConnecting",(r,e,t)=>{t.defer();let n=getPlayerIdentifiers(source),a=n.findIndex(i=>i.startsWith(s.identifier.name));a>-1?s.ban.enabled?d.db("infame").collection("bans").findOne({discord:n[a].replace(`${s.identifier.name}:`,"")}).then(i=>{i===null?t.done():new Date().getTime()>=i.time?d.db("infame").collection("bans").deleteOne({discord:n[a].replace(`${s.identifier.name}:`,"")}).then(()=>{t.update(l("unbannedBeCareful")),setTimeout(()=>{t.done(),CancelEvent()},5e3)}):(t.done(l("banDetails",[i.reason,i.author,new Date(i.time).toLocaleString()])),CancelEvent())}):t.done():(t.done(l("noOpenSession",[s.identifier.name])),CancelEvent())});var re=require("mongodb");var S=(r,e)=>{let t={},n=GetPlayerPed(r.toString());if(s.character.save.position){let[a,i,m]=GetEntityCoords(n);t.position={x:a,y:i,z:m}}s.character.save.health&&(t.health=GetEntityHealth(n)),s.character.save.armor&&(t.armor=GetPedArmour(n)),d.db("infame").collection("characters").updateOne({_id:re.ObjectId.createFromHexString(e)},{$set:t})};s.character.enabled&&setInterval(()=>{getPlayers().map(r=>{let e=Player(r);e.state.infameId&&e.state.characterId&&S(Number(r),e.state.characterId),s.log.enabled&&u(l("charactersSaved"))})},s.saveTime);var E=r=>{for(let e in r)e==="_id"&&r[e].toHexString?r[e]=r[e].toHexString():typeof r[e]=="object"&&(r[e]=E(r[e]));return r};var D=r=>{SetPlayerModel(r.toString(),s.model.default),setTimeout(()=>{emitNet("infame.nets.players.setData",r,s.health.default);let e=GetPlayerPed(r.toString());SetPedArmour(e,s.armor.default),RemoveAllPedWeapons(e,!1),s.weapons.default.map(t=>{GiveWeaponToPed(e,t,100,!1,!1)})},500)};var b=(r,e)=>{let t=Player(r);t.state.infameId=e,s.character.enabled?d.db("infame").collection("characters").find({playerId:e}).toArray().then(n=>{emitNet("infame.nets.characters.openMenu",r,{characters:E(n)})}):D(r)},C=r=>{let e=getPlayerIdentifiers(r),t=e.findIndex(a=>a.startsWith(s.identifier.name)),n=e[t].replace(`${s.identifier.name}:`,"");d.db("infame").collection("users").updateOne({discord:n},{$setOnInsert:{rank:s.rank.default,discord:n}},{upsert:!0}).then(a=>{a.upsertedId!=null?b(r,a.upsertedId.toHexString()):d.db("infame").collection("users").findOne({discord:n}).then(i=>{i!=null&&i._id&&b(r,i._id.toHexString())})})};var te=require("mongodb");var P=(r,e)=>{d.db("infame").collection("characters").findOne({_id:te.ObjectId.createFromHexString(e)}).then(t=>{if(t){s.log.enabled&&u(l("playerCharacter",[GetPlayerName(r.toString()),e])),h(r,0,l("selectedCharacter"),5e3);let n=Player(r);n.state.characterId=e,SetPlayerModel(r.toString(),t.model),setTimeout(()=>{emitNet("infame.nets.players.setData",r,t.health);let a=GetPlayerPed(r.toString());SetPedArmour(a,t.armor),SetEntityCoords(a,t.position.x,t.position.y,t.position.z,!0,!1,!1,!0),RemoveAllPedWeapons(a,!1),t.weapons.map(i=>{GiveWeaponToPed(a,i,100,!1,!1)})},500)}else h(r,1,l("invalidCharacter"),5e3),C(r)})};onNet("infame.nets.characters.createCharacter",r=>{let e=source,t=Player(e);if(t.state.characterId){h(e,1,l("youAlreadyHaveCharacter"),5e3);return}d.db("infame").collection("characters").countDocuments({playerId:t.state.infameId}).then(n=>{s.character.maxCharactersEnabled&&n>=s.character.maxCharacters?h(e,1,l("characterLimit",[s.character.maxCharacters.toString()]),5e3):d.db("infame").collection("characters").insertOne({playerId:t.state.infameId,firstName:r.firstName,lastName:r.lastName,health:s.health.default,armor:s.armor.default,model:s.model.default,weapons:s.weapons.default,position:{x:0,y:0,z:0}}).then(a=>{s.log.enabled&&u(l("newCharacter",[GetPlayerName(source.toString()),a.insertedId.toHexString()])),P(e,a.insertedId.toHexString()),h(e,0,l("yourCharacterCreatedWithSuccess"),5e3)})})});onNet("infame.nets.characters.selectCharacter",r=>{let e=source;if(Player(e).state.characterId){h(e,1,l("youAlreadyHaveCharacter"),5e3);return}P(e,r)});onNet("baseevents:onPlayerDied",()=>{let r=source;v(r)});onNet("baseevents:onPlayerKilled",()=>{let r=source;v(r)});onNet("baseevents:onPlayerWasted",()=>{let r=source;v(r)});onNet("infame.nets.playerConnected",()=>{let r=source;s.log.enabled&&u(l("newPlayer",[GetPlayerName(r.toString())])),C(r)});var de=require("mongodb");var ne=require("os"),ae=require("path"),U=require("util");var X={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]};function Y(r,e,t,n=!1){let a=String(e),i=(c,o)=>`\x1B[${o[0]}m${c}\x1B[${o[1]}m`,m=(c,o)=>o!=null&&typeof o=="string"?i(c,X[o]):o!=null&&Array.isArray(o)?o.reduce((f,p)=>m(f,p),c):o!=null&&o[c.trim()]!=null?m(c,o[c.trim()]):o!=null&&o["*"]!=null?m(c,o["*"]):c;return a.replace(/{{(.+?)}}/g,(c,o)=>{var p;let f=t[o]!=null?t[o]:n?"":c;return r.stylePrettyLogs?m(f,(p=r==null?void 0:r.prettyLogStyles)==null?void 0:p[o])+i("",X.reset):f})}var pe={runtime:"Nodejs",runtimeVersion:process.version,hostname:(0,ne.hostname)()};function ie(r,e,t,n,a,i){return Object.assign({},pe,{name:a,parentNames:i,date:new Date,logLevelId:r,logLevelName:e,path:n?void 0:fe(t)})}function fe(r,e=Error()){var t,n,a;return oe((a=(n=(t=e==null?void 0:e.stack)==null?void 0:t.split(`
`))==null?void 0:n.filter(i=>i.includes("    at ")))==null?void 0:a[r])}function O(r){var e,t;return(t=(e=r==null?void 0:r.stack)==null?void 0:e.split(`
`))==null?void 0:t.reduce((n,a)=>(a.includes("    at ")&&n.push(oe(a)),n),[])}function oe(r){var t,n,a,i;let e={fullFilePath:void 0,fileName:void 0,fileNameWithLine:void 0,fileColumn:void 0,fileLine:void 0,filePath:void 0,filePathWithLine:void 0,method:void 0};if(r!=null&&r.includes("    at ")){r=r.replace(/^\s+at\s+/gm,"");let m=r.split(" ("),c=(r==null?void 0:r.slice(-1))===")"?(t=r==null?void 0:r.match(/\(([^)]+)\)/))==null?void 0:t[1]:r,o=c!=null&&c.includes(":")?(a=(n=c==null?void 0:c.replace("file://",""))==null?void 0:n.replace(process.cwd(),""))==null?void 0:a.split(":"):void 0,f=o==null?void 0:o.pop(),p=o==null?void 0:o.pop(),y=o==null?void 0:o.pop(),L=(0,ae.normalize)(`${y}:${p}`),N=(i=y==null?void 0:y.split("/"))==null?void 0:i.pop(),x=`${N}:${p}`;y!=null&&y.length>0&&(e.fullFilePath=c,e.fileName=N,e.fileNameWithLine=x,e.fileColumn=f,e.fileLine=p,e.filePath=y,e.filePathWithLine=L,e.method=(m==null?void 0:m[1])!=null?m==null?void 0:m[0]:void 0)}return e}function Z(r){var e;return((e=U.types)==null?void 0:e.isNativeError)!=null?U.types.isNativeError(r):r instanceof Error}function se(r,e){return r.reduce((t,n)=>(Z(n)?t.errors.push(he(n,e)):t.args.push(n),t),{args:[],errors:[]})}function he(r,e){let t=O(r).map(a=>Y(e,e.prettyErrorStackTemplate,{...a},!0)),n={errorName:` ${r.name} `,errorMessage:r.message,errorStack:t.join(`
`)};return Y(e,e.prettyErrorTemplate,n)}function me(r,e,t,n){let a=(t.length>0&&e.length>0?`
`:"")+t.join(`
`);n.prettyInspectOptions.colors=n.stylePrettyLogs,console.log(r+(0,U.formatWithOptions)(n.prettyInspectOptions,...e)+a)}function ce(r){console.log(e(r));function e(t){let n=new Set;return JSON.stringify(t,(a,i)=>{if(typeof i=="object"&&i!==null){if(n.has(i))return"[Circular]";n.add(i)}return i})}}function j(r){return Buffer.isBuffer(r)}function w(r,e=2,t=0){return r!=null&&isNaN(r)?"":(r=r!=null?r+t:r,e===2?r==null?"--":r<10?"0"+r:r.toString():r==null?"---":r<10?"00"+r:r<100?"0"+r:r.toString())}var q=class{constructor(e,t,n=4){var o,f,p,y,L,N,x;this.logObj=t,this.stackDepthLevel=n;let a=![typeof window,typeof document].includes("undefined"),i=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";this.runtime=a?"browser":i?"nodejs":"unknown";let m=a?(((window==null?void 0:window.chrome)||window.Intl&&(Intl==null?void 0:Intl.v8BreakIterator))&&"CSS"in window)!=null:!1,c=a?/^((?!chrome|android).)*safari/i.test(navigator==null?void 0:navigator.userAgent):!1;this.stackDepthLevel=c?4:this.stackDepthLevel,this.settings={type:(e==null?void 0:e.type)??"pretty",name:e==null?void 0:e.name,parentNames:e==null?void 0:e.parentNames,minLevel:(e==null?void 0:e.minLevel)??0,argumentsArrayName:e==null?void 0:e.argumentsArrayName,hideLogPositionForProduction:(e==null?void 0:e.hideLogPositionForProduction)??!1,prettyLogTemplate:(e==null?void 0:e.prettyLogTemplate)??"{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}	{{logLevelName}}	{{filePathWithLine}}{{nameWithDelimiterPrefix}}	",prettyErrorTemplate:(e==null?void 0:e.prettyErrorTemplate)??`
{{errorName}} {{errorMessage}}
error stack:
{{errorStack}}`,prettyErrorStackTemplate:(e==null?void 0:e.prettyErrorStackTemplate)??`  \u2022 {{fileName}}	{{method}}
	{{filePathWithLine}}`,prettyErrorParentNamesSeparator:(e==null?void 0:e.prettyErrorParentNamesSeparator)??":",prettyErrorLoggerNameDelimiter:(e==null?void 0:e.prettyErrorLoggerNameDelimiter)??"	",stylePrettyLogs:(e==null?void 0:e.stylePrettyLogs)??!0,prettyLogTimeZone:(e==null?void 0:e.prettyLogTimeZone)??"UTC",prettyLogStyles:(e==null?void 0:e.prettyLogStyles)??{logLevelName:{"*":["bold","black","bgWhiteBright","dim"],SILLY:["bold","white"],TRACE:["bold","whiteBright"],DEBUG:["bold","green"],INFO:["bold","blue"],WARN:["bold","yellow"],ERROR:["bold","red"],FATAL:["bold","redBright"]},dateIsoStr:"white",filePathWithLine:"white",name:["white","bold"],nameWithDelimiterPrefix:["white","bold"],nameWithDelimiterSuffix:["white","bold"],errorName:["bold","bgRedBright","whiteBright"],fileName:["yellow"],fileNameWithLine:"white"},prettyInspectOptions:(e==null?void 0:e.prettyInspectOptions)??{colors:!0,compact:!1,depth:1/0},metaProperty:(e==null?void 0:e.metaProperty)??"_meta",maskPlaceholder:(e==null?void 0:e.maskPlaceholder)??"[***]",maskValuesOfKeys:(e==null?void 0:e.maskValuesOfKeys)??["password"],maskValuesOfKeysCaseInsensitive:(e==null?void 0:e.maskValuesOfKeysCaseInsensitive)??!1,maskValuesRegEx:e==null?void 0:e.maskValuesRegEx,prefix:[...(e==null?void 0:e.prefix)??[]],attachedTransports:[...(e==null?void 0:e.attachedTransports)??[]],overwrite:{mask:(o=e==null?void 0:e.overwrite)==null?void 0:o.mask,toLogObj:(f=e==null?void 0:e.overwrite)==null?void 0:f.toLogObj,addMeta:(p=e==null?void 0:e.overwrite)==null?void 0:p.addMeta,formatMeta:(y=e==null?void 0:e.overwrite)==null?void 0:y.formatMeta,formatLogObj:(L=e==null?void 0:e.overwrite)==null?void 0:L.formatLogObj,transportFormatted:(N=e==null?void 0:e.overwrite)==null?void 0:N.transportFormatted,transportJSON:(x=e==null?void 0:e.overwrite)==null?void 0:x.transportJSON}},this.settings.stylePrettyLogs=this.settings.stylePrettyLogs&&a&&!m?!1:this.settings.stylePrettyLogs}log(e,t,...n){var y,L,N,x,B,F,W,R,V,_,G,K,z,H;if(e<this.settings.minLevel)return;let a=[...this.settings.prefix,...n],i=((y=this.settings.overwrite)==null?void 0:y.mask)!=null?(L=this.settings.overwrite)==null?void 0:L.mask(a):this.settings.maskValuesOfKeys!=null&&this.settings.maskValuesOfKeys.length>0?this._mask(a):a,m=this.logObj!=null?this._recursiveCloneAndExecuteFunctions(this.logObj):void 0,c=((N=this.settings.overwrite)==null?void 0:N.toLogObj)!=null?(x=this.settings.overwrite)==null?void 0:x.toLogObj(i,m):this._toLogObj(i,m),o=((B=this.settings.overwrite)==null?void 0:B.addMeta)!=null?(F=this.settings.overwrite)==null?void 0:F.addMeta(c,e,t):this._addMetaToLogObj(c,e,t),f,p;return((W=this.settings.overwrite)==null?void 0:W.formatMeta)!=null&&(f=(R=this.settings.overwrite)==null?void 0:R.formatMeta(o==null?void 0:o[this.settings.metaProperty])),((V=this.settings.overwrite)==null?void 0:V.formatLogObj)!=null&&(p=(_=this.settings.overwrite)==null?void 0:_.formatLogObj(i,this.settings)),this.settings.type==="pretty"&&(f=f??this._prettyFormatLogObjMeta(o==null?void 0:o[this.settings.metaProperty]),p=p??se(i,this.settings)),f!=null&&p!=null?((G=this.settings.overwrite)==null?void 0:G.transportFormatted)!=null?(K=this.settings.overwrite)==null||K.transportFormatted(f,p.args,p.errors,this.settings):me(f,p.args,p.errors,this.settings):((z=this.settings.overwrite)==null?void 0:z.transportJSON)!=null?(H=this.settings.overwrite)==null||H.transportJSON(o):this.settings.type!=="hidden"&&ce(o),this.settings.attachedTransports!=null&&this.settings.attachedTransports.length>0&&this.settings.attachedTransports.forEach(J=>{J(o)}),o}attachTransport(e){this.settings.attachedTransports.push(e)}getSubLogger(e,t){var i,m,c;let n={...this.settings,...e,parentNames:((i=this.settings)==null?void 0:i.parentNames)!=null&&((m=this.settings)==null?void 0:m.name)!=null?[...this.settings.parentNames,this.settings.name]:((c=this.settings)==null?void 0:c.name)!=null?[this.settings.name]:void 0,prefix:[...this.settings.prefix,...(e==null?void 0:e.prefix)??[]]};return new this.constructor(n,t??this.logObj,this.stackDepthLevel)}_mask(e){let t=this.settings.maskValuesOfKeysCaseInsensitive!==!0?this.settings.maskValuesOfKeys:this.settings.maskValuesOfKeys.map(n=>n.toLowerCase());return e==null?void 0:e.map(n=>this._recursiveCloneAndMaskValuesOfKeys(n,t))}_recursiveCloneAndMaskValuesOfKeys(e,t,n=[]){return n.includes(e)?{...e}:(typeof e=="object"&&e!=null&&n.push(e),j(e)?e:e instanceof Map?new Map(e):e instanceof Set?new Set(e):Array.isArray(e)?e.map(a=>this._recursiveCloneAndMaskValuesOfKeys(a,t,n)):e instanceof Date?new Date(e.getTime()):Z(e)?Object.getOwnPropertyNames(e).reduce((a,i)=>{var m;return a[i]=t.includes(((m=this.settings)==null?void 0:m.maskValuesOfKeysCaseInsensitive)!==!0?i:i.toLowerCase())?this.settings.maskPlaceholder:this._recursiveCloneAndMaskValuesOfKeys(e[i],t,n),a},this._cloneError(e)):e!=null&&typeof e=="object"?Object.getOwnPropertyNames(e).reduce((a,i)=>{var m;return a[i]=t.includes(((m=this.settings)==null?void 0:m.maskValuesOfKeysCaseInsensitive)!==!0?i:i.toLowerCase())?this.settings.maskPlaceholder:this._recursiveCloneAndMaskValuesOfKeys(e[i],t,n),a},Object.create(Object.getPrototypeOf(e))):(a=>{var i,m;return(m=(i=this.settings)==null?void 0:i.maskValuesRegEx)==null||m.forEach(c=>{var o;a=(o=a==null?void 0:a.toString())==null?void 0:o.replace(c,this.settings.maskPlaceholder)}),a})(e))}_recursiveCloneAndExecuteFunctions(e,t=[]){return t.includes(e)?{...e}:(typeof e=="object"&&t.push(e),Array.isArray(e)?e.map(n=>this._recursiveCloneAndExecuteFunctions(n,t)):e instanceof Date?new Date(e.getTime()):e&&typeof e=="object"?Object.getOwnPropertyNames(e).reduce((n,a)=>(Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(e,a)),n[a]=typeof e[a]=="function"?e[a]():this._recursiveCloneAndExecuteFunctions(e[a],t),n),Object.create(Object.getPrototypeOf(e))):e)}_toLogObj(e,t={}){return e=e==null?void 0:e.map(n=>Z(n)?this._toErrorObject(n):n),this.settings.argumentsArrayName==null?e.length===1&&!Array.isArray(e[0])&&j(e[0])!==!0&&!(e[0]instanceof Date)?t=typeof e[0]=="object"&&e[0]!=null?{...e[0],...t}:{0:e[0],...t}:t={...t,...e}:t={...t,[this.settings.argumentsArrayName]:e},t}_cloneError(e){let t=e.constructor,n=new t(e.message);Object.assign(n,e);let a=Object.getOwnPropertyNames(n);for(let i of a){let m=Object.getOwnPropertyDescriptor(n,i);m&&(m.writable=!0,Object.defineProperty(n,i,m))}return n}_toErrorObject(e){return{nativeError:e,name:e.name??"Error",message:e.message,stack:O(e)}}_addMetaToLogObj(e,t,n){return{...e,[this.settings.metaProperty]:ie(t,n,this.stackDepthLevel,this.settings.hideLogPositionForProduction,this.settings.name,this.settings.parentNames)}}_prettyFormatLogObjMeta(e){var m,c,o,f,p,y,L,N,x,B,F,W,R,V,_,G,K,z,H,J;if(e==null)return"";let t=this.settings.prettyLogTemplate,n={};t.includes("{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}")?t=t.replace("{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}","{{dateIsoStr}}"):this.settings.prettyLogTimeZone==="UTC"?(n.yyyy=((m=e==null?void 0:e.date)==null?void 0:m.getUTCFullYear())??"----",n.mm=w((c=e==null?void 0:e.date)==null?void 0:c.getUTCMonth(),2,1),n.dd=w((o=e==null?void 0:e.date)==null?void 0:o.getUTCDate(),2),n.hh=w((f=e==null?void 0:e.date)==null?void 0:f.getUTCHours(),2),n.MM=w((p=e==null?void 0:e.date)==null?void 0:p.getUTCMinutes(),2),n.ss=w((y=e==null?void 0:e.date)==null?void 0:y.getUTCSeconds(),2),n.ms=w((L=e==null?void 0:e.date)==null?void 0:L.getUTCMilliseconds(),3)):(n.yyyy=((N=e==null?void 0:e.date)==null?void 0:N.getFullYear())??"----",n.mm=w((x=e==null?void 0:e.date)==null?void 0:x.getMonth(),2,1),n.dd=w((B=e==null?void 0:e.date)==null?void 0:B.getDate(),2),n.hh=w((F=e==null?void 0:e.date)==null?void 0:F.getHours(),2),n.MM=w((W=e==null?void 0:e.date)==null?void 0:W.getMinutes(),2),n.ss=w((R=e==null?void 0:e.date)==null?void 0:R.getSeconds(),2),n.ms=w((V=e==null?void 0:e.date)==null?void 0:V.getMilliseconds(),3));let a=this.settings.prettyLogTimeZone==="UTC"?e==null?void 0:e.date:new Date(((_=e==null?void 0:e.date)==null?void 0:_.getTime())-((G=e==null?void 0:e.date)==null?void 0:G.getTimezoneOffset())*6e4);n.rawIsoStr=a==null?void 0:a.toISOString(),n.dateIsoStr=a==null?void 0:a.toISOString().replace("T"," ").replace("Z",""),n.logLevelName=e==null?void 0:e.logLevelName,n.fileNameWithLine=((K=e==null?void 0:e.path)==null?void 0:K.fileNameWithLine)??"",n.filePathWithLine=((z=e==null?void 0:e.path)==null?void 0:z.filePathWithLine)??"",n.fullFilePath=((H=e==null?void 0:e.path)==null?void 0:H.fullFilePath)??"";let i=(J=this.settings.parentNames)==null?void 0:J.join(this.settings.prettyErrorParentNamesSeparator);return i=i!=null&&(e==null?void 0:e.name)!=null?i+this.settings.prettyErrorParentNamesSeparator:void 0,n.name=(e==null?void 0:e.name)!=null||i!=null?(i??"")+(e==null?void 0:e.name):"",n.nameWithDelimiterPrefix=n.name.length>0?this.settings.prettyErrorLoggerNameDelimiter+n.name:"",n.nameWithDelimiterSuffix=n.name.length>0?n.name+this.settings.prettyErrorLoggerNameDelimiter:"",Y(this.settings,t,n)}};var Q=class extends q{constructor(e,t){super(e,t,5)}log(e,t,...n){return super.log(e,t,...n)}silly(...e){return super.log(0,"SILLY",...e)}trace(...e){return super.log(1,"TRACE",...e)}debug(...e){return super.log(2,"DEBUG",...e)}info(...e){return super.log(3,"INFO",...e)}warn(...e){return super.log(4,"WARN",...e)}error(...e){return super.log(5,"ERROR",...e)}fatal(...e){return super.log(6,"FATAL",...e)}getSubLogger(e,t){return super.getSubLogger(e,t)}};var ue=new Q({hideLogPositionForProduction:!0}),u=(...r)=>{s.log.saveInDatabase&&d.db("infame").collection("logs").insertOne({content:r.length===1?r[0]:JSON.stringify(r),time:new Date().getTime()}),ue.info(...r)};on("playerDropped",()=>{let r=source;s.log.enabled&&u(l("playerDisconnected",[GetPlayerName(r.toString())]));let e=Player(r);e.state.characterId&&S(r,e.state.characterId)});
